var config={Init:function(){$("#configsubmit").click(function(a){a.preventDefault(),$.ajax({url:"Function/config.php",data:$("#formconfig").serialize(),type:"POST",dataType:"json",success:function(a){"success"==a.status&&(location.href="./")},error:function(){}})}),$("#configcancel").click(function(a){a.preventDefault(),location.href="./"})}},generate={i:0,j:0,n:0,progress:0,timer:0,Init:function(){(1==$(".generate").val()||0===parseInt($(".total").html()))&&(setInterval(generate.IncrementProgress,100),generate.Generate())},Generate:function(){var a=null===generate.j?"i="+generate.i:"i="+generate.i+"&j="+generate.j;$.ajax({url:"Function/generate.php",data:a,type:"POST",dataType:"json",success:function(a){"success"==a.status?(generate.i=parseInt(a.i),generate.j=parseInt(a.j),generate.progress+=26e3,generate.Generate()):(generate.progress+=26e3,location.href="./")},error:function(){}})},IncrementProgress:function(){var a=generate.n/17576e3*100;$(".progress").width(a+"%"),$(".progress-percent").html(Math.round(a)+"%"),$(".total").html(generate.InsertComma(generate.n)),generate.progress<17576e3?($(".timer").html(generate.ConvertTime(generate.timer)),generate.timer+=100):$(".timer").html("Done!"),generate.n<generate.progress&&generate.progress>0&&(generate.n=generate.n+22750<=17576e3?generate.n+22750:17576e3)},InsertComma:function(a){a+="",x=a.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var b=/(\d+)(\d{3})/;b.test(x1);)x1=x1.replace(b,"$1,$2");return x1+x2},ConvertTime:function(a){var b=0,c=0;return a>=6e4&&(b=(a-a%6e4)/6e4,a%=6e4),a>=1e3&&(c=(a-a%1e3)/1e3,a%=1e3),10>b&&(b="0"+b),10>c&&(c="0"+c),a||(a="000"),b+":"+c+"."+a}},rebuild={post:null,Init:function(){$(".dialog-rebuild").dialog({modal:!0,width:540,autoOpen:!1,open:function(){$.get("Function/secure.php?ms=25",function(a){rebuild.post={hts:a}})},buttons:[{text:"Yes, I know what I'm doing...",click:function(){$.ajax({url:"Function/rebuild.php",data:rebuild.post,type:"POST",dataType:"json",success:function(a){"success"==a.status&&(location.href="./")},error:function(){}})}},{text:"On second thought",click:function(){$(this).dialog("close")}}]}),$(".masthead-rebuild").click(function(a){a.preventDefault(),$(".dialog-rebuild").dialog("open")})}};$(function(){config.Init(),generate.Init(),rebuild.Init()});